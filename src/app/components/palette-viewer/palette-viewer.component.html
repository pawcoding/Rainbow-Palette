<div [class]="dark ? 'dark' : ''">
  <section
    class="px-4"
  >
    <div class="flex items-center mb-6">
      <!-- Palette name -->
      <div class="flex gap-4">
        <h2
          *ngIf="!editingState"
          class="inline-block cursor-pointer"
          (click)="openEditor()"
        >
          {{palette.title}}
        </h2>

        <!-- Palette name input -->
        <input *ngIf="editingState"
               type="text" #editTitle
               placeholder="Palette title"
               class="bg-transparent p-0 text-xl font-bold
                      border-0 focus:border-b-primary-700 border-b-2 focus:ring-0 transition-all duration-200"
               (focusout)="closeEditor()"
               (keydown.enter)="closeEditor()"
               [value]="palette.title"
        >

        <span
          *ngIf="!editingState"
          class="p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition-colors duration-500"
          title="Edit palette name"
          (click)="openEditor()"
        >
          <img src="/assets/icons/edit.svg" alt="Edit" class="icon">
        </span>
      </div>

      <!-- Export Button -->
      <button
        class="py-2 px-4 ml-auto inline-flex items-center
               text-primary-100 bg-primary-700 font-medium rounded cursor-pointer"
        title="Export the palette"
        (click)="exportPalette()"
      >
        <svg
          class="w-6 h-6 mr-2"
          viewBox="0 0 48 48"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill="currentColor"
            d="M24 30.35q-.45 0-.875-.175t-.775-.525l-8.1-8.1q-.7-.7-.675-1.675.025-.975.725-1.675.7-.7 1.65-.7t1.65.7l4.05 4.1V6.85q0-1 .675-1.7T24 4.45q1 0 1.675.7t.675 1.7V22.3l4.1-4.1q.7-.7 1.65-.7t1.65.7q.7.7.7 1.675 0 .975-.7 1.675l-8.1 8.1q-.35.35-.775.525-.425.175-.875.175ZM10.25 42.4q-1.95 0-3.325-1.4-1.375-1.4-1.375-3.4v-7q0-1 .675-1.675T7.9 28.25q1 0 1.675.675t.675 1.675v7.05H37.7V30.6q0-1 .675-1.675t1.675-.675q1 0 1.675.675T42.4 30.6v7.05q0 1.95-1.4 3.35-1.4 1.4-3.3 1.4Z"/>
        </svg>

        Export
      </button>

      <!-- Save Button -->
      <button
        class="py-2 px-4 ml-4 inline-flex items-center
               text-primary-100 bg-primary-700 font-medium rounded cursor-pointer"
        title="Save the palette"
        (click)="savePalette()"
      >
        <svg
          *ngIf="!saving"
          class="w-6 h-6 mr-2"
          viewBox="0 0 48 48"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill="currentColor"
            d="M9.45 43.25q-1.95 0-3.325-1.375Q4.75 40.5 4.75 38.55V9.45q0-1.95 1.375-3.35Q7.5 4.7 9.45 4.7H32.7q.95 0 1.85.4.9.4 1.55 1.05l5.75 5.75q.65.65 1.05 1.55t.4 1.85v23.25q0 1.95-1.4 3.325-1.4 1.375-3.35 1.375Zm29.1-27.85L32.6 9.45H9.45v29.1h29.1ZM24 35.3q2.15 0 3.675-1.525T29.2 30.1q0-2.15-1.525-3.675T24 24.9q-2.15 0-3.675 1.525T18.8 30.1q0 2.15 1.525 3.675T24 35.3Zm-9.55-16.05h13.2q1 0 1.675-.675T30 16.9v-2.45q0-1-.675-1.675T27.65 12.1h-13.2q-1 0-1.675.675T12.1 14.45v2.45q0 1 .675 1.675t1.675.675Zm-5-3.85v23.15-29.1Z"/>
        </svg>

        <svg
          *ngIf="saving"
          class="ml-1 mr-3 w-4 h-4 text-primary-400 fill-primary-100 animate-spin"
          viewBox="0 0 100 101"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M100 50.59c0 27.615-22.386 50.001-50 50.001s-50-22.386-50-50 22.386-50 50-50 50 22.386 50 50Zm-90.919 0c0 22.6 18.32 40.92 40.919 40.92 22.599 0 40.919-18.32 40.919-40.92 0-22.598-18.32-40.918-40.919-40.918-22.599 0-40.919 18.32-40.919 40.919Z" fill="currentColor"/>
          <path d="M93.968 39.04c2.425-.636 3.894-3.128 3.04-5.486A50 50 0 0 0 41.735 1.279c-2.474.414-3.922 2.919-3.285 5.344.637 2.426 3.12 3.849 5.6 3.484a40.916 40.916 0 0 1 44.131 25.769c.902 2.34 3.361 3.802 5.787 3.165Z" fill="currentFill"/>
        </svg>

        Save
      </button>
    </div>

    <!-- Display all colors -->
    <color-viewer
      *ngFor="let color of palette.colors"
      [color]="color"
      (onRemove)="removeColor(color)"
    ></color-viewer>

    <!-- Add random color to palette -->
    <button
      class="py-2 px-4 mt-4 mx-auto flex items-center
             font-medium text-primary-100 bg-primary-700 rounded transition-all duration-200"
      (click)="addRandomColor($event)"
    >
      <svg
        *ngIf="!adding"
        class="w-6 h-6 mr-2"
        viewBox="0 0 48 48"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill="currentColor"
          d="M27 29.1q.65 0 1.075-.425.425-.425.425-1.075v-5.1h5.1q.65 0 1.075-.425.425-.425.425-1.075 0-.65-.425-1.075-.425-.425-1.075-.425h-5.1v-5.1q0-.65-.425-1.075Q27.65 12.9 27 12.9q-.65 0-1.075.425-.425.425-.425 1.075v5.1h-5.1q-.65 0-1.075.425Q18.9 20.35 18.9 21q0 .65.425 1.075.425.425 1.075.425h5.1v5.1q0 .65.425 1.075.425.425 1.075.425ZM13 38q-1.2 0-2.1-.9-.9-.9-.9-2.1V7q0-1.2.9-2.1.9-.9 2.1-.9h28q1.2 0 2.1.9.9.9.9 2.1v28q0 1.2-.9 2.1-.9.9-2.1.9Zm0-3h28V7H13v28Zm-6 9q-1.2 0-2.1-.9Q4 42.2 4 41V11.5q0-.65.425-1.075Q4.85 10 5.5 10q.65 0 1.075.425Q7 10.85 7 11.5V41h29.5q.65 0 1.075.425Q38 41.85 38 42.5q0 .65-.425 1.075Q37.15 44 36.5 44Zm6-37v28V7Z"/>
      </svg>
      <svg
        *ngIf="adding"
        class="ml-1 mr-3 w-4 h-4 text-primary-400 fill-primary-100 animate-spin"
        viewBox="0 0 100 101"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path d="M100 50.59c0 27.615-22.386 50.001-50 50.001s-50-22.386-50-50 22.386-50 50-50 50 22.386 50 50Zm-90.919 0c0 22.6 18.32 40.92 40.919 40.92 22.599 0 40.919-18.32 40.919-40.92 0-22.598-18.32-40.918-40.919-40.918-22.599 0-40.919 18.32-40.919 40.919Z" fill="currentColor"/>
        <path d="M93.968 39.04c2.425-.636 3.894-3.128 3.04-5.486A50 50 0 0 0 41.735 1.279c-2.474.414-3.922 2.919-3.285 5.344.637 2.426 3.12 3.849 5.6 3.484a40.916 40.916 0 0 1 44.131 25.769c.902 2.34 3.361 3.802 5.787 3.165Z" fill="currentFill"/>
      </svg>

      Add color
    </button>
  </section>
</div>
