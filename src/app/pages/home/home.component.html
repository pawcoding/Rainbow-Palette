<div>
  <article class="px-4 text-center text-lg">
    <div *ngIf="!loading">
      <div
        class="flex items-center justify-center"
        style="min-height: calc(80svh - 170px)">
        <section>
          <p class="font-bold">
            {{ 'home.text1' | translate }}
          </p>

          <p>
            {{ 'home.text2' | translate }}
          </p>

          <div class="relative mx-auto mt-4 flex flex-col max-w-xxs">
            <span class="flex">
              <input
                type="color"
                [title]="'color-editor.pick' | translate"
                id="color"
                #color
                class="h-10 w-1/5 overflow-clip rounded-r-none rounded-l"
                [value]="value"
                (input)="updateValue(color.value)" />

              <input
                type="text"
                [title]="'color-editor.hex' | translate"
                id="hexCode"
                #hexCode
                placeholder="#4472C4"
                class="w-4/5 rounded-r text-medium text-gray-900 bg-gray-100 dark:text-gray-200 dark:bg-gray-800 transition-colors duration-500 border-0 focus:ring-0"
                [value]="value"
                (input)="updateValue(hexCode.value)" />
            </span>

            <button
              class="py-2 px-4 mt-2 inline-flex items-center text-primary-100 bg-primary-700 font-medium rounded transition-colors duration-500"
              type="submit"
              [disabled]="invalid">
              <span
                class="grow text-center"
                [class]="invalid ? 'cursor-not-allowed' : 'cursor-pointer'"
                [title]="
                  invalid
                    ? 'You need a 6-digit hex code'
                    : 'Generate a color palette'
                "
                (click)="generatePalette()">
                {{ 'home.generation.start' | translate }}
              </span>

              <ng-icon name="heroChevronDownMini" size="1.5rem" />
            </button>

            <div
              class="w-64 mt-1 p-2 absolute top-full text-gray-800 bg-gray-200 dark:text-gray-100 dark:bg-gray-700 rounded"
              [class]="dropdown ? '' : 'hidden'"
              (mouseleave)="dropdown = false">
              <span class="mb-1 block p-2 text-left text-base font-medium">
                {{ 'home.scheme.pick' | translate }}:
              </span>

              <section
                class="h-32 overflow-y-auto text-sm scrollbar-thin scrollbar-thumb-primary-600 scrollbar-track-gray-300 dark:scrollbar-track-gray-600 sm:h-48">
                <label
                  *ngFor="let schemeToShow of schemes"
                  class="block p-2 mb-1 mr-4 hover:bg-gray-300 dark:hover:bg-gray-600 rounded cursor-pointer transition-colors duration-500"
                  [htmlFor]="schemeToShow.for">
                  <input
                    type="radio"
                    name="scheme"
                    class="hidden peer"
                    [checked]="schemeToShow.index === scheme"
                    [id]="schemeToShow.for"
                    [value]="schemeToShow.name"
                    (change)="updateScheme(schemeToShow.scheme)" />

                  <span
                    class="peer-checked:font-bold peer-checked:text-primary-700 dark:peer-checked:text-primary-500">
                    {{ 'home.scheme.' + schemeToShow.name | translate }}
                  </span>
                </label>
              </section>
            </div>
          </div>
        </section>
      </div>

      <div class="border-t border-t-gray-300 pt-16 dark:border-t-gray-600">
        <section
          class="mx-auto max-w-xl text-justify text-base lg:max-w-7xl lg:px-4">
          <h2 class="mb-8 text-center">
            {{ 'home.tutorial.title' | translate }}
          </h2>

          <div class="grid gap-8 lg:grid-cols-3 lg:gap-16">
            <article class="xs:grid lg:block grid-cols-3 items-center">
              <div
                class="text-center text-primary-900 dark:text-primary-300 lg:mb-4">
                <ng-icon name="heroSwatch" size="4rem" />

                <h3>{{ 'home.tutorial.generation.title' | translate }}</h3>
              </div>

              <p class="col-span-2">
                {{ 'home.tutorial.generation.text' | translate }}
              </p>
            </article>

            <article class="xs:grid lg:block grid-cols-3 items-center">
              <div
                class="order-last text-center text-primary-900 dark:text-primary-300 lg:order-1 lg:mb-4">
                <ng-icon name="heroAdjustmentsHorizontal" size="4rem" />

                <h3>{{ 'home.tutorial.editing.title' | translate }}</h3>
              </div>

              <p class="col-span-2 lg:order-last">
                {{ 'home.tutorial.editing.text' | translate }}
              </p>
            </article>

            <article class="xs:grid lg:block grid-cols-3 items-center">
              <div
                class="text-center text-primary-900 dark:text-primary-300 lg:mb-4">
                <ng-icon name="heroArchiveBoxArrowDown" size="4rem" />

                <h3>{{ 'home.tutorial.export.title' | translate }}</h3>
              </div>

              <p class="col-span-2">
                {{ 'home.tutorial.export.text' | translate }}
              </p>
            </article>
          </div>

          <p class="mt-8 text-center">
            <b>{{ 'home.tutorial.end.title' | translate }}</b
            ><br />
            {{ 'home.tutorial.end.subtitle' | translate }}
          </p>
        </section>

        <section class="mx-auto mt-16 max-w-xl text-justify text-base">
          <h2>{{ 'home.additions.title' | translate }}</h2>

          <h3 class="pb-0.5">
            {{ 'home.additions.development.title' | translate }}
          </h3>
          <p
            class="dark:text-gray-200"
            [innerHtml]="
              'home.additions.development.text'
                | translate
                  : { github: getGitHubLink(), discord: getDiscordLink() }
            "></p>

          <h3 class="pb-0.5">
            {{ 'home.additions.planned.title' | translate }}
          </h3>
          <p class="dark:text-gray-200">
            {{ 'home.additions.planned.text' | translate }}
          </p>
          <ul
            class="list-inside list-disc space-y-1 md:space-y-0 text-left mt-2 dark:text-gray-200">
            <ng-container *ngFor="let issue of ['15', '17', '18', '19', '22']">
              <li>
                {{ 'home.additions.planned.list.' + issue | translate }} (<a
                  [href]="
                    'https://github.com/pawcoding/Rainbow-Palette/issues/' +
                    issue
                  "
                  target="_blank"
                  rel="noreferrer noopener"
                  class="underline"
                  [title]="'home.additions.planned.issue' | translate"
                  >#{{ issue }}</a
                >)
              </li>
            </ng-container>
          </ul>
        </section>
      </div>
    </div>

    <article class="mx-auto max-w-md" *ngIf="loading">
      <p>
        <b>{{ 'home.generation.note' | translate }}:</b><br />
        <span [innerHtml]="'home.generation.perfection' | translate"></span>
      </p>

      <div
        #loadContainer
        class="h-6 w-full mt-10 rounded-full bg-gray-200 dark:bg-gray-800">
        <span
          #loadBar
          class="flex h-6 items-center justify-center rounded-full text-sm font-bold text-primary-50 bg-primary-700 animate-load">
          {{ progress | percent: '2.0' }}
        </span>
      </div>
    </article>
  </article>
</div>
